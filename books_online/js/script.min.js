const mobileSwitchWidth=838,recounter={init:function(e={}){if(this.breakpoints=e.breakpoints||null,this.breakpoints){this.breakpoints.keys=Object.keys(this.breakpoints);for(let e=0;e<this.breakpoints.keys.length;e++)this.breakpoints.keys[e]=Number(this.breakpoints.keys[e]);this.breakpoints.keys.push(0),this.breakpoints.keys.sort(((e,t)=>e-t)),window.addEventListener("resize",this.check.bind(this)),this.check(0,!0)}},check:function(e,t=!1){for(let e=0;e<this.breakpoints.keys.length&&window.innerWidth>this.breakpoints.keys[e];e++)this.state=this.breakpoints.keys[e],this.stateIndex=e;t&&(this.prev_state=this.state),this.state==this.prev_state||t||(this.state>this.prev_state?this.breakpoints[this.state]():this.breakpoints[this.prev_state](),this.prev_state=this.state)}};recounter.init({breakpoints:{433:()=>{gridSlider.buildSlides()},565:()=>{document.querySelector(".footer-top__radio").checked=!0},701:()=>{gridSlider.buildSlides()},838:()=>{scrollLock.recalc(),header.menu.toggle(),categoriesBtn.turnOff(),gridSlider.buildSlides()},940:()=>{gridSlider.buildSlides()}}});const transitionLock={locked:!1,check:function(e=0){let t=this,i=this.locked;return 0==t.locked&&(t.locked=!0,setTimeout((function(){t.locked=!1}),e)),i}},scrollLock={items:document.body.children,init:function(){this.calc(),this.recalc(),window.addEventListener("resize",this.calc.bind(this))},calc:function(){this.scrollbarWidth=window.innerWidth-document.body.offsetWidth},recalc:function(){for(let e=0;e<this.items.length;e++)this.items[e].style.paddingRight="",this.items[e].basePadding=1*getComputedStyle(this.items[e]).paddingRight.slice(0,-2)},lock:function(){for(let e=0;e<this.items.length;e++)this.items[e].style.paddingRight=this.items[e].basePadding+this.scrollbarWidth+"px";document.body.classList.add("_locked")},unlock:function(e=0){let t=this;setTimeout((function(){for(let e=0;e<t.items.length;e++)t.items[e].style.paddingRight=t.items[e].basePadding+"px";document.body.classList.remove("_locked")}),e)}};scrollLock.init();const header={refs:{mobSwitchW:838,translock:transitionLock,scrlock:scrollLock},init:function(e={}){this.elem=document.querySelector(".header");let t=1e3*getComputedStyle(document.body).getPropertyValue("--timer-menu").slice(0,-1)||0;e.menu&&this.menu.init(this,t),e.submenu&&this.submenu.init(this,t),e.hidingHeader&&window.addEventListener("load",(()=>this.hidingHeader.init(this)))},menu:{refs:{sm:"submenu",hh:"hidingHeader"},isLoaded:!1,init:function(e,t){this.isLoaded=!0,this.root=e,this.timeout=t,this.element=document.querySelector(".header__hiding-menu"),this.buttons=document.querySelectorAll(".menu-open-btn, .menu-close-btn, .menu-turn-off-area");let i=document.getElementsByClassName("menu__items")[0],s=headerMenuOptions||null;if(s){if(s.links){let e={};for(let t=0;t<i.children.length;t++)e[i.children[t].dataset.name]=i.children[t];i.innerHTML="";for(let t=0;t<s.links.length;t++)i.appendChild(e[s.links[t]])}if(s.activeLink)for(let e=0;e<i.children.length;e++)if(i.children[e].dataset.name==s.activeLink){i.children[e].firstElementChild.classList.add("this-page");break}}s.elem=document.querySelector("#headerMenuOptions"),s.elem.parentElement.removeChild(s.elem);for(let e=0;e<this.buttons.length;e++)this.buttons[e].addEventListener("click",this.toggle.bind(this))},toggle:function(e){if(this.isLoaded&&!this.root.refs.translock.check(this.timeout)){if(this.element.classList.contains("_active")){this.element.classList.remove("_active");for(let e=0;e<this.buttons.length;e++)this.buttons[e].classList.remove("_active");this.root.refs.scrlock.unlock(this.timeout)}else if(e){this.element.classList.add("_active");for(let e=0;e<this.buttons.length;e++)this.buttons[e].classList.add("_active");this.root.refs.scrlock.lock(),this.root[this.refs.hh].isLoaded&&this.root[this.refs.hh].scroll(0,!0)}this.root[this.refs.sm].isLoaded&&this.root[this.refs.sm].list.classList.contains("_visible")&&(this.root[this.refs.sm].link.classList.remove("_active"),this.root[this.refs.sm].list.classList.remove("_visible"))}}},submenu:{isLoaded:!1,init:function(e,t){this.isLoaded=!0,this.root=e,this.timeout=t,this.link=document.querySelector("._drop-link"),this.list=document.querySelector(".menu__dropdown"),this.backButton=document.querySelector(".menu-back-btn"),this.backButton.addEventListener("click",this.close),this.updateEvents()},open:function(e){e.preventDefault(),this.link.classList.add("_active"),this.list.classList.add("_visible")},close:function(){this.link.classList.remove("_active"),this.list.classList.remove("_visible")},updateEvents:function(){this.isLoaded&&(window.innerWidth<=this.root.refs.mobSwitchW?(this.link.removeEventListener("mouseover",this.open),this.root.elem.removeEventListener("mouseleave",this.close),this.link.addEventListener("click",this.open)):(this.link.addEventListener("mouseover",this.open),this.root.elem.addEventListener("mouseleave",this.close),this.link.removeEventListener("click",this.open)))}},hidingHeader:{isLoaded:!1,init:function(e){this.isLoaded=!0,this.root=e,this.visiblePosition=Number(getComputedStyle(this.root.elem).top.slice(0,-2)),this.hiddenPosition=-1*this.root.elem.offsetHeight,this.calc(),window.addEventListener("scroll",this.scroll.bind(this))},calc:function(){this.isLoaded&&(this.Y=this.YPrev=pageYOffset,this.diff=0,this.currentPos=this.visiblePosition,this.root.elem.style.top=this.currentPos+"px")},scroll:function(e,t){if(!(window.innerWidth>this.root.refs.mobSwitchW)){if(t)return this.root.elem.style.top=this.visiblePosition+"px",void(this.currentPos=this.visiblePosition);(pageYOffset<this.Y+this.diff&&this.Y>this.YPrev||pageYOffset>this.Y+this.diff&&this.Y<this.YPrev)&&(this.diff=pageYOffset-this.Y),this.YPrev=this.Y,this.Y=pageYOffset-this.diff,this.currentPos-=this.Y-this.YPrev,this.currentPos>this.visiblePosition&&(this.currentPos=this.visiblePosition),this.currentPos<this.hiddenPosition&&(this.currentPos=this.hiddenPosition),this.root.elem.style.top=this.currentPos+"px"}}}};header.init({menu:!0,submenu:!1,hidingHeader:!1});const formToEmail={messages:{ok:"Your message has been sent",okDemo:"Your message has been sent (demo)",error:"Error when sending a message",emptyReqField:"Fill in the required fields, please",incorrectName:"Incorrect name",incorrectPhone:"Incorrect phone number",incorrectEmail:"Incorrect email"},init:function(e=!1){this.demo=e,this.inputs=document.querySelectorAll("form input, form textarea");for(let e=0;e<this.inputs.length;e++)this.inputs[e].addEventListener("input",(function(){this.classList.remove("_error")})),"phone"==this.inputs[e].getAttribute("name")&&(this.inputs[e].addEventListener("input",this.editPhoneByMask,!1),this.inputs[e].addEventListener("focus",this.editPhoneByMask,!1),this.inputs[e].addEventListener("blur",this.editPhoneByMask,!1),this.inputs[e].addEventListener("keydown",this.editPhoneByMask,!1));for(let e=0;e<document.forms.length;e++)document.forms[e].addEventListener("submit",this.send.bind(this))},send:async function(e){e.preventDefault();let t=e.target.querySelector(".form-report");t.classList.remove("ok"),t.classList.remove("er");let i=this.check(e.target);if(i[0])return t.classList.add("er"),void(1==i[0]?t.innerHTML=i[1][0]:t.innerHTML=this.messages.emptyReqField);t.innerHTML="";let s,n=new FormData(e.target);n.append("form",e.target.getAttribute("name")),this.addCustomInputs(e,n,"input-range"),this.log(n),e.target.classList.add("_sending"),this.demo?(s=await new Promise((function(e,t){setTimeout((()=>e()),2e3)})),s={ok:!0}):s=await fetch("php/sendmail.php",{method:"POST",body:n}),s.ok?(t.classList.add("ok"),this.demo?t.innerHTML=this.messages.okDemo:t.innerHTML=this.messages.ok,this.clean(e.target,!1)):(t.classList.add("er"),t.innerHTML=this.messages.error),e.target.classList.remove("_sending")},check:function(e){let t=[],i=e.querySelectorAll("input, textarea");for(let e=0;e<i.length;e++)if(i[e].classList.remove("_error"),i[e].classList.contains("_req")&&""==i[e].value)i[e].classList.add("_error"),t.push(this.messages.emptyReqField);else switch(i[e].getAttribute("name")){case"name":i[e].value&&0==/^.{2,}$/.test(i[e].value)&&(i[e].classList.add("_error"),t.push(this.messages.incorrectName));break;case"email":i[e].value&&0==/^[a-zA-Z-.]{3,}@[a-z]{3,}\.[a-z]{2,5}$/.test(i[e].value)&&(i[e].classList.add("_error"),t.push(this.messages.incorrectEmail));break;case"phone":i[e].value&&0==/^\+\d\s\(\d{3}\)\s\d{3}(-\d\d){2}$/.test(i[e].value)&&(i[e].classList.add("_error"),t.push(this.messages.incorrectPhone))}return[t.length,t]},log:function(e){for(let t of e.entries())console.log(t[0]+": "+t[1])},addCustomInputs:function(e,t,i){let s=e.target.querySelectorAll("."+i);for(let e=0;e<s.length;e++)t.append(s[e].getAttribute("name"),s[e].getAttribute("value"))},clean:function(e,t=!0){if(!e)return;let i=e.querySelectorAll("input, textarea");for(let e=0;e<i.length;e++)i[e].hasAttribute("name")&&(i[e].value=""),t&&i[e].classList.remove("_error");if(t){let t=e.querySelector(".form-report");t.classList.remove("ok"),t.classList.remove("er"),t.innerHTML=""}},editPhoneByMask:function(e){e.keyCode&&(keyCode=e.keyCode),this.selectionStart<3&&e.preventDefault();var t="+7 (___) ___-__-__",i=0,s=t.replace(/\D/g,""),n=this.value.replace(/\D/g,""),r=t.replace(/[_\d]/g,(function(e){return i<n.length?n.charAt(i++)||s.charAt(i):e}));-1!=(i=r.indexOf("_"))&&(i<5&&(i=3),r=r.slice(0,i));var l=t.substr(0,this.value.length).replace(/_+/g,(function(e){return"\\d{1,"+e.length+"}"})).replace(/[+()]/g,"\\$&");(!(l=new RegExp("^"+l+"$")).test(this.value)||this.value.length<5||keyCode>47&&keyCode<58)&&(this.value=r),"blur"==e.type&&this.value.length<5&&(this.value="")}};formToEmail.init(!0);class Select{constructor(e={}){if(this.elemName=e.elem||"select",this.elem=document.querySelector("."+this.elemName),!this.elem)return;this.header=this.elem.querySelector(".select__header-text"),this.list=this.elem.querySelector(".select__list-wrapper"),this.list.innerHTML="",this.basicSelect=this.elem.querySelectorAll("select option");let t=document.createElement("ul");t.classList.add("select__list"),this.list.appendChild(t);for(let e=0;e<this.basicSelect.length;e++){if(this.basicSelect[e].hasAttribute("disabled"))continue;let i=document.createElement("li");i.classList.add("select__option"),i.innerHTML=this.basicSelect[e].innerHTML,t.appendChild(i)}this.options=this.elem.querySelectorAll(".select__option"),this.listMaxHeight=this.elem.querySelector(".select__list").offsetHeight,this.listMinHeight=0,this.hideList();let i=this;for(let e=0;e<this.options.length;e++)this.options[e].addEventListener("click",(function(){i.selectItem(event,i,e)}));e.firstOptSelected?(this.header.innerHTML=this.options[0].innerHTML,this.options[0].classList.add("_selected"),this.basicSelect[0].parentElement.removeChild(this.basicSelect[0])):this.header.innerHTML=this.basicSelect[0].innerHTML,this.onselect=e.onselect||function(e){}}hideList(e){this.list.style.height=this.listMinHeight+"px",this.header.classList.remove("_active"),this.list.classList.remove("_active"),this.header.parentElement.addEventListener("click",this.showList.bind(this),{once:!0})}showList(e){e.stopPropagation(),this.list.style.height=this.listMaxHeight+"px",this.header.classList.add("_active"),this.list.classList.add("_active"),window.addEventListener("click",this.hideList.bind(this),{once:!0})}selectItem(e,t,i){for(let i=0;i<e.target.parentElement.children.length;i++)e.target.parentElement.children[i].classList.remove("_selected"),t.basicSelect[i].removeAttribute("selected");e.target.classList.add("_selected"),t.basicSelect[i+1].setAttribute("selected","true"),t.onselect(t.basicSelect[i+1].value),t.header.innerHTML=e.target.innerHTML}}let catalog_select=new Select({elem:"catalog__select",firstOptSelected:!0,onselect:e=>{gridSlider.filter(mainProductFilter.genre,e),window.scrollTo({top:0})}});function getRandom(e=0,t=99){return Math.floor(Math.random()*(t-e+1))+e}const swiper=new Swiper(".swiper",{navigation:{prevEl:".swiper-button-prev",nextEl:".swiper-button-next"},loop:!0,loopAdditionalSlides:2,speed:800,spaceBetween:15,autoplay:{delay:5e3,disableOnInteraction:!1,pauseOnMouseEnter:!0}});async function jsonLoad(e){if(!e)return;let t=await fetch("./"+e);if(t.ok)return console.log('Loaded "'+e+'"'),t.json();console.log('Failed to load "'+e+'"')}const tabsBlockButtons=document.querySelectorAll(".tabs__btn");for(let e=0;e<tabsBlockButtons.length;e++)tabsBlockButtons[e].addEventListener("click",(function(){let e=this.parentElement.children,t=this.parentElement.nextElementSibling.children;for(let e=0;e<t.length;e++)t[e].classList.remove("_active");for(let i=0;i<e.length;i++)e[i].classList.remove("_active"),e[i]==this&&(e[i].classList.add("_active"),t[i].classList.add("_active"))}));let addressLink=location.href,mainProductFilter={},dynamicFill={product:{},also:[],genres:["children","science_fiction","fantasy","mystery","romance","horror","poetry","literature"],searchItem:function(e){let t;for(let i=0;i<e.length;i++)if(e[i].id&&e[i].id==mainProductFilter.id){t=e[i];break}return t},fillInfo:function(e,t){function i(e,t,i){switch(t){case"genre":e.innerHTML=i.genre,e.setAttribute("href","index.html?genre="+i.genre);break;case"categories":e.dataset.categories=i.categories;break;case"title":e.innerHTML=i.title;break;case"price":e.innerHTML=i.price;break;case"discount":i.discount||e.classList.add("_hidden");break;case"link":e.setAttribute("href",i.link+"?id="+i.id);break;case"image":e.src=i.image;break;case"description":e.innerHTML=i.description;break;case"info":e.innerHTML=i.info;break;case"details":e.innerHTML=i.details}}function s(e,t){if(e.dataset.dynamic){let s=e.dataset.dynamic.split(", ");for(let n=0;n<s.length;n++)i(e,s[n],t)}for(let i=0;i<e.children.length;i++)s(e.children[i],t)}if(e&&t)return s(e,t),e;s(document.querySelector(".content"),dynamicFill.product)},fillAlsoLike:function(e){let t=[];for(let i=0;i<e.length&&!(e[i].title!=dynamicFill.product.title&&e[i].genre==dynamicFill.product.genre&&(t.push(e[i]),t.length>=7));i++);for(;t.length<7;){let i;for(let e=0;e<999&&(i=getRandom(0,dynamicFill.genres.length),dynamicFill.genres[i]==dynamicFill.product.genre);e++);for(let s=0;s<e.length&&!(e[s].title!=dynamicFill.product.title&&e[s].genre==dynamicFill.genres[i]&&(t.push(e[s]),t.length>=7));s++);}let i=document.querySelector(".also-like__items"),s=i.children[0];i.innerHTML="";let n=[];for(let e=0;e<t.length;e++)n[e]=s.cloneNode(!0),i.appendChild(n[e]);for(let e=0;e<i.children.length;e++)i.children[e]=dynamicFill.fillInfo(i.children[e],t[e])}};if(addressLink.match(/\?/)){let e=addressLink.split("?");e=e[1].split("&");for(let t=0;t<e.length;t++){let i=e[t].split("=");mainProductFilter[i[0]]=i[1]}if(mainProductFilter.genre){let e=document.querySelectorAll(".side-menu a, .menu__link");for(let t=0;t<e.length;t++)e[t].getAttribute("href").match(mainProductFilter.genre)&&e[t].classList.add("this-page")}mainProductFilter.id&&jsonLoad("books_info.json").then((e=>{Object.assign(dynamicFill.product,dynamicFill.searchItem(e)),jsonLoad("books_catalog.json").then((e=>{Object.assign(dynamicFill.product,dynamicFill.searchItem(e)),dynamicFill.fillInfo(),dynamicFill.fillAlsoLike(e)}))}))}else mainProductFilter.genre="all",document.querySelector("#default_link")&&document.querySelector("#default_link").classList.add("this-page");const categoriesBtn={menu:document.querySelector(".side-menu"),init:function(){this.menu.querySelector(".side-menu__header").addEventListener("click",this.toggle.bind(this)),window.addEventListener("click",this.turnOff.bind(this))},toggle:function(){this.menu.classList.contains("_visible")?scrollLock.unlock():scrollLock.lock(),this.menu.classList.toggle("_visible")},turnOff:function(e){e&&e.target.closest(".side-menu")||this.menu&&this.menu.classList.contains("_visible")&&(scrollLock.unlock(),this.menu.classList.remove("_visible"))}},gridSlider={refs:{recounter:recounter},names:{slider:"gridslider__slider",wrapper:"gridslider__wrapper",slide:"gridslider__slide",navigation:"gridslider__nav",pagination:"gridslider__pagination",pagination_btn:"pagination__button",next_btn:"gridslider__btn-right",more_btn:"gridslider__btn-more",select:"gridslider__select",image:"product__cover img"},init:function(){this.options={src:"books_catalog.json",type:"books",slideSize:[10,12,12,15,12,15]},this.slider=document.querySelector("."+this.names.slider),this.wrapper=document.querySelector("."+this.names.wrapper),this.pagination={elem:document.querySelector("."+this.names.pagination)},document.querySelector("."+this.names.more_btn).addEventListener("click",this.addMore.bind(this)),window.addEventListener("resize",this.resizeSlide.bind(this)),this.getPattern(),jsonLoad(this.options.src).then((e=>{this.slidesData=e,this.buildSlides(!0),Object.keys(mainProductFilter).length>0&&gridSlider.filter(mainProductFilter.genre)}))},buildSlides:function(){if(!this.slider)return;let e=[],t=[],i=0,s=0,n=this.options.slideSize[this.refs.recounter.stateIndex];void 0===n&&(console.log("Error: gridSlider slideSize incorrect"),n=this.options.slideSize[0]);let r=this.fillPattern(this.options.type,this.options.modif,this.slidesDataFilter?this.slidesDataFilter:this.slidesData,!0,!1);for(;i<r.length;){let l=[];for(let e=0;e<n&&(l.push(r[i]),i++,i!=r.length);e++);s++,e.push('<div class="'+this.names.slide+'">'+l.join("")+"</div>"),t.push('<div class="'+this.names.pagination_btn+'">'+s+"</div>")}if(this.wrapper.innerHTML=e.join(""),t.length>7){let e=t.splice(t.length-2,2),i=document.createElement("div");i.className="pagination__wrapper",this.pagination.main=document.createElement("div"),this.pagination.main.className="pagination__main",i.appendChild(this.pagination.main),this.pagination.suffix=document.createElement("div"),this.pagination.suffix.className="pagination__suffix",this.pagination.elem.innerHTML="",this.pagination.elem.appendChild(i),this.pagination.elem.appendChild(this.pagination.suffix),this.pagination.main.innerHTML=t.join(""),this.pagination.suffix.innerHTML=e.join(""),this.pagination.suffix.children[0].classList.add("_inactive")}else this.pagination.elem.innerHTML=t.join("");this.pagination.position=0;let l=document.querySelector("."+this.names.pagination_btn);l&&(this.pagination.btnWidth=Number(getComputedStyle(l).width.slice(0,-2))+Number(getComputedStyle(l).marginRight.slice(0,-2))),this.pagination.buttons=this.pagination.elem.querySelectorAll("."+this.names.pagination_btn);for(let e=0;e<this.pagination.buttons.length;e++)this.pagination.buttons[e].addEventListener("click",this.slideTo.bind(this));this.activeIndex=0,document.querySelector("."+this.names.navigation).classList.remove("_hidden"),this.activeIndex>=this.pagination.buttons.length-1&&document.querySelector("."+this.names.navigation).classList.add("_hidden"),this.slideTo()},resizeSlide:function(){if(window.innerWidth>838)for(let e=0;e<this.wrapper.children.length;e++)this.wrapper.children[e].style.width=getComputedStyle(this.slider).width;else for(let e=0;e<this.wrapper.children.length;e++)this.wrapper.children[e].style.width=""},slideTo:function(e){if(e)if(e.currentTarget.classList.contains(this.names.next_btn)){if(!(this.activeIndex<this.pagination.buttons.length-1))return;this.activeIndex++}else this.activeIndex=e.currentTarget.innerHTML-1;for(let e=0;e<this.pagination.buttons.length;e++)this.pagination.buttons[e].classList.remove("_active"),this.pagination.buttons[e].innerHTML==this.activeIndex+1&&this.pagination.buttons[e].classList.add("_active");this.wrapper.style.left=-100*this.activeIndex+"%",this.lazyLoad(),this.pagination.main&&this.slideToCollapsed()},slideToCollapsed:function(){this.activeIndex>2&&this.activeIndex<this.pagination.buttons.length-5?this.pagination.position=(this.activeIndex-2)*-this.pagination.btnWidth:(this.activeIndex<=2&&(this.pagination.position=0),this.activeIndex>=this.pagination.buttons.length-5&&(this.pagination.position=(this.pagination.buttons.length-7)*-this.pagination.btnWidth,this.pagination.suffix.children[0].classList.remove("_inactive"))),this.activeIndex<this.pagination.buttons.length-5&&this.pagination.suffix.children[0].classList.add("_inactive"),this.pagination.main.style.left=this.pagination.position+"px"},addMore:function(){let e=pageYOffset;this.wrapper.children[++this.activeIndex].classList.add("_visible"),this.activeIndex>=this.pagination.buttons.length-1&&document.querySelector("."+this.names.navigation).classList.add("_hidden"),window.scrollTo({top:e,behavior:"instant"}),this.lazyLoad()},lazyLoad:function(){if(0==this.wrapper.children.length)return;let e=this.wrapper.children[this.activeIndex].querySelectorAll("."+this.names.image);if(e[0].src!=e[0].dataset.src)for(let t=0;t<e.length;t++)e[t].dataset.src&&(e[t].src=e[t].dataset.src),e[t].dataset.srcset&&(e[t].srcset=e[t].dataset.srcset),e[t].addEventListener("load",(function(){this.parentElement.querySelector(".image-loader").style.display="none"}))},filter:function(e,t){if(this.slidesDataFilter=[],!e)return;if(t||(t=document.querySelector(".cat-tabs__panel").children[0].dataset.category),"all"==e)this.slidesDataFilter=this.slidesData;else for(let t=0;t<this.slidesData.length;t++)this.slidesData[t].genre==e&&this.slidesDataFilter.push(this.slidesData[t]);let i=[];for(let e=0;e<this.slidesDataFilter.length;e++)this.slidesDataFilter[e].categories.includes(t)&&i.push(this.slidesDataFilter[e]);this.slidesDataFilter=i,this.buildSlides(!0)},getPattern:function(){this.slidePattern={books:document.querySelector("#books-data-pattern")};for(let e in this.slidePattern)this.slidePattern[e]&&(this.slidePattern[e].parentElement.innerHTML="")},fillPattern:function(e,t,i,s,n){function r(e,t,i){switch(t){case"genre":e.dataset.genre=i.genre;break;case"categories":e.dataset.categories=i.categories;break;case"title":e.innerHTML=i.title;break;case"price":e.innerHTML=i.price;break;case"discount":i.discount||e.classList.add("_hidden");break;case"link":e.setAttribute("href",i.link+"?id="+i.id);break;case"image":s?(e.dataset.src=i.image,n&&(e.dataset.srcset=i.image.replace(".","@2x.")+" 2x")):(e.src=i.image,n&&(e.srcset=i.image.replace(".","@2x.")+" 2x"))}}function l(e,t){if(e.dataset.pattern){let i=e.dataset.pattern.split(", ");for(let s=0;s<i.length;s++)r(e,i[s],t)}for(let i=0;i<e.children.length;i++)l(e.children[i],t)}if(!this.slidePattern[e])return;let a=[];for(let t=0;t<i.length;t++){let s=this.slidePattern[e].cloneNode(!0);l(s,i[t]),a.push(s.innerHTML)}return a}},gridSliderTabs=document.querySelectorAll(".cat-tabs__panel-item");for(let e=0;e<gridSliderTabs.length;e++)gridSliderTabs[e].addEventListener("click",(function(){for(let e=0;e<gridSliderTabs.length;e++)gridSliderTabs[e].classList.remove("_active");this.classList.add("_active"),gridSlider.filter(mainProductFilter.genre,this.dataset.category)}));function moduleCheckAndLoad(){window.addEventListener("load",(()=>{let e=[[".gridslider__slider",()=>{gridSlider.init()}]];for(let t=0;t<e.length;t++)document.querySelector(e[t][0])&&e[t][1]()}));let e=[[".side-menu",()=>{categoriesBtn.init()}]];for(let t=0;t<e.length;t++)document.querySelector(e[t][0])&&e[t][1]()}moduleCheckAndLoad();